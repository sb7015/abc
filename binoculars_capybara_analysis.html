<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Binoculars: Capybara Analysis</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #EBE4FF 0%, #E1edff 100%);
            color: #231E33;
            line-height: 1.6;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        header {
            background: linear-gradient(135deg, #5009B5 0%, #281849 100%);
            color: white;
            padding: 40px;
            border-radius: 15px;
            text-align: center;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(80, 9, 181, 0.3);
        }

        h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .subtitle {
            font-size: 1.2em;
            opacity: 0.9;
            color: #00BEBA;
        }

        .text-box {
            background: white;
            padding: 30px;
            border-radius: 15px;
            margin-bottom: 30px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);
            border-left: 5px solid #794CFF;
        }

        .text-box h2 {
            color: #5009B5;
            margin-bottom: 15px;
            font-size: 1.8em;
        }

        .story-text {
            background: #EBE4FF;
            padding: 25px;
            border-radius: 10px;
            font-size: 1.1em;
            line-height: 1.8;
            font-style: italic;
            border: 3px solid #794CFF;
        }

        .metrics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .metric-card {
            background: white;
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);
            text-align: center;
            transition: transform 0.3s ease;
        }

        .metric-card:hover {
            transform: translateY(-5px);
        }

        .metric-card.ppl {
            border-top: 5px solid #00B5F5;
        }

        .metric-card.xppl {
            border-top: 5px solid #00BEBA;
        }

        .metric-card.ratio {
            border-top: 5px solid #794CFF;
        }

        .metric-value {
            font-size: 3em;
            font-weight: bold;
            margin: 15px 0;
        }

        .metric-card.ppl .metric-value {
            color: #00B5F5;
        }

        .metric-card.xppl .metric-value {
            color: #00BEBA;
        }

        .metric-card.ratio .metric-value {
            color: #794CFF;
        }

        .metric-label {
            font-size: 1.2em;
            color: #231E33;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .metric-description {
            font-size: 0.9em;
            color: #666;
            margin-top: 10px;
        }

        .comparison-section {
            background: linear-gradient(135deg, #281849 0%, #5009B5 100%);
            color: white;
            padding: 40px;
            border-radius: 15px;
            margin: 30px 0;
            box-shadow: 0 10px 30px rgba(80, 9, 181, 0.3);
        }

        .comparison-section h2 {
            color: #00BEBA;
            margin-bottom: 20px;
            font-size: 2em;
        }

        .formula-box {
            background: #231E33;
            padding: 25px;
            border-radius: 10px;
            margin: 20px 0;
            font-family: 'Courier New', monospace;
            font-size: 1.3em;
            text-align: center;
            border: 2px solid #794CFF;
        }

        .formula-box .highlight-cyan {
            color: #00BEBA;
            font-weight: bold;
        }

        .formula-box .highlight-purple {
            color: #794CFF;
            font-weight: bold;
        }

        .result-box {
            background: linear-gradient(135deg, #00BEBA 0%, #00B5F5 100%);
            padding: 30px;
            border-radius: 15px;
            text-align: center;
            margin: 30px 0;
            color: white;
        }

        .result-box h3 {
            font-size: 1.8em;
            margin-bottom: 15px;
        }

        .result-box .verdict {
            font-size: 2.5em;
            font-weight: bold;
            margin: 20px 0;
            color: #281849;
        }

        .theory-section {
            background: white;
            padding: 30px;
            border-radius: 15px;
            margin: 30px 0;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);
        }

        .theory-section h2 {
            color: #5009B5;
            margin-bottom: 20px;
            font-size: 1.8em;
            border-bottom: 3px solid #794CFF;
            padding-bottom: 10px;
        }

        .theory-box {
            background: #D9F5F5;
            padding: 20px;
            border-left: 5px solid #00BEBA;
            border-radius: 8px;
            margin: 15px 0;
        }

        .theory-box h3 {
            color: #281849;
            margin-bottom: 10px;
        }

        .highlight-box {
            background: #EBE4FF;
            padding: 20px;
            border-radius: 10px;
            margin: 15px 0;
            border-left: 5px solid #5009B5;
        }

        .token-sample {
            background: #F5F5F5;
            padding: 15px;
            border-radius: 8px;
            margin: 10px 0;
            font-family: 'Courier New', monospace;
        }

        .token-sample .token {
            display: inline-block;
            margin: 5px;
            padding: 5px 10px;
            background: #EBE4FF;
            border-radius: 5px;
            border: 1px solid #794CFF;
        }

        .score-high {
            background: #ffcccc !important;
            border-color: #ff0000 !important;
            font-weight: bold;
        }

        .score-low {
            background: #ccffcc !important;
            border-color: #00ff00 !important;
        }

        .comparison-table {
            width: 100%;
            margin: 20px 0;
            border-collapse: collapse;
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        .comparison-table th {
            background: #5009B5;
            color: white;
            padding: 15px;
            text-align: left;
        }

        .comparison-table td {
            padding: 15px;
            border-bottom: 1px solid #EBE4FF;
        }

        .comparison-table tr:hover {
            background: #EBE4FF;
        }

        .key-insight {
            background: linear-gradient(135deg, #794CFF 0%, #00B5F5 100%);
            color: white;
            padding: 25px;
            border-radius: 15px;
            margin: 20px 0;
            font-size: 1.1em;
            box-shadow: 0 5px 15px rgba(121, 76, 255, 0.3);
        }

        .key-insight strong {
            color: #00BEBA;
        }

        @media (max-width: 768px) {
            h1 {
                font-size: 1.8em;
            }
            .metric-value {
                font-size: 2em;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>🔬 Binoculars AI Detection Analysis</h1>
            <p class="subtitle">Real-World Example: The Capybara Astrophysicist</p>
            <p style="font-size: 0.9em; margin-top: 15px; opacity: 0.8;">Hans et al., 2024 | ICML 2024 | arXiv:2401.12070</p>
        </header>

        <!-- Sources -->
        <div class="theory-section">
            <h2>📚 Sources & References</h2>
            
            <div class="theory-box">
                <h3>Primary Source</h3>
                <p><strong>Hans, A., Schwarzschild, A., Cherepanova, V., Kazemi, H., Saha, A., Goldblum, M., Geiping, J., & Goldstein, T. (2024).</strong></p>
                <p style="margin-top: 10px;"><em>"Spotting LLMs With Binoculars: Zero-Shot Detection of Machine-Generated Text"</em></p>
                <p style="margin-top: 10px;">ICML 2024 | University of Maryland</p>
                <p style="margin-top: 10px;">arXiv:2401.12070v3 [cs.CL]</p>
                <p style="margin-top: 15px;"><a href="https://arxiv.org/abs/2401.12070" target="_blank" style="color: #794CFF; font-weight: bold;">https://arxiv.org/abs/2401.12070</a></p>
            </div>

            <div class="highlight-box">
                <h3>Key Concepts from Paper</h3>
                <p><strong>Section 3.2 - The Capybara Problem (Page 4):</strong></p>
                <p style="margin-left: 20px; margin-top: 10px;">"Prompts such as '1, 2, 3,' have the lowest perplexity with completions such as '4, 5, 6.' However, a prompt about a capybara that is also an astrophysicist will yield a response that seems more surprising... resulting in the false determination that the text was written by a human."</p>
                
                <p style="margin-top: 15px;"><strong>Section 3.3 - Detection Score (Page 4-5):</strong></p>
                <p style="margin-left: 20px; margin-top: 10px;">"We use cross-perplexity as a normalizing factor that intuitively encodes the perplexity level of next-token predictions from two models. Rather than examining raw perplexity scores, we instead propose measuring whether the tokens that appear in a string are surprising relative to the baseline perplexity."</p>
                
                <p style="margin-top: 15px;"><strong>Section 4 - Performance (Page 6, Table 4):</strong></p>
                <p style="margin-left: 20px; margin-top: 10px;">"Binoculars detects over 90% of generated samples from ChatGPT at a false positive rate of 0.01%."</p>
            </div>

            <div class="theory-box">
                <h3>Implementation Source</h3>
                <p><strong>Miczek, D. (2024).</strong></p>
                <p style="margin-top: 10px;"><em>"Detecting LLM-Generated Text with Binoculars"</em></p>
                <p style="margin-top: 10px;">Hugging Face Blog</p>
                <p style="margin-top: 10px;"><a href="https://huggingface.co/blog/dmicz/binoculars-text-detection" target="_blank" style="color: #794CFF; font-weight: bold;">https://huggingface.co/blog/dmicz/binoculars-text-detection</a></p>
                <p style="margin-top: 15px;"><strong>Real Measurements Used:</strong></p>
                <ul style="margin-left: 20px; margin-top: 10px;">
                    <li>Capybara text: PPL = 302.5422, X-PPL = 399.2843, Score = 0.7577</li>
                    <li>Models: Falcon-7B-Instruct (Observer) + Falcon-7B (Performer)</li>
                    <li>135 tokens analyzed with token-by-token measurements</li>
                </ul>
            </div>

            <div class="highlight-box">
                <h3>GitHub Repository</h3>
                <p><strong>Official Implementation:</strong></p>
                <p style="margin-top: 10px;"><a href="https://github.com/ahans30/Binoculars" target="_blank" style="color: #794CFF; font-weight: bold;">https://github.com/ahans30/Binoculars</a></p>
                <p style="margin-top: 10px;"><strong>Hugging Face Demo:</strong></p>
                <p style="margin-top: 10px;"><a href="https://huggingface.co/spaces/tomg-group-umd/Binoculars" target="_blank" style="color: #794CFF; font-weight: bold;">https://huggingface.co/spaces/tomg-group-umd/Binoculars</a></p>
            </div>
        </div>

        <!-- Original Text -->
        <div class="text-box">
            <h2>📝 The Complete Text (AI-Generated)</h2>
            <div class="story-text">
                Dr. Capy Cosmos, a capybara unlike any other, astounded the scientific community with his groundbreaking research in astrophysics. With his keen sense of observation and unparalleled ability to interpret cosmic data, he uncovered new insights into the mysteries of black holes and the origins of the universe. As he peered through telescopes with his large, round eyes, fellow researchers often remarked that it seemed as if the stars themselves whispered their secrets directly to him. Dr. Cosmos not only became a beacon of inspiration to aspiring scientists but also proved that intellect and innovation can be found in the most unexpected of creatures.
            </div>
        </div>

        <!-- Key Metrics -->
        <div class="text-box">
            <h2>📊 Real Measured Scores</h2>
            <p style="margin-bottom: 20px; color: #666; font-style: italic;">Source: Miczek (2024) - Hugging Face Blog Implementation</p>
            <div class="metrics-grid">
                <div class="metric-card ppl">
                    <div class="metric-label">PPL (Perplexity)</div>
                    <div class="metric-value">302.54</div>
                    <div class="metric-description">Observer's surprise at actual words</div>
                    <div class="metric-description" style="margin-top: 10px; font-weight: bold;">135 tokens analyzed</div>
                </div>
                
                <div class="metric-card xppl">
                    <div class="metric-label">X-PPL (Cross-Perplexity)</div>
                    <div class="metric-value">399.28</div>
                    <div class="metric-description">How much models disagree</div>
                    <div class="metric-description" style="margin-top: 10px; font-weight: bold;">Higher than PPL! 🔑</div>
                </div>
                
                <div class="metric-card ratio">
                    <div class="metric-label">Binoculars Score</div>
                    <div class="metric-value">0.757</div>
                    <div class="metric-description">PPL ÷ X-PPL</div>
                    <div class="metric-description" style="margin-top: 10px; font-weight: bold;">< 0.85 = AI</div>
                </div>
            </div>
        </div>

        <!-- Calculation -->
        <div class="comparison-section">
            <h2>🧮 The Calculation</h2>
            
            <div class="formula-box">
                <p>Binoculars Score (B) = <span class="highlight-cyan">PPL</span> ÷ <span class="highlight-purple">X-PPL</span></p>
            </div>
            
            <div class="formula-box">
                <p>B = <span class="highlight-cyan">302.54</span> ÷ <span class="highlight-purple">399.28</span></p>
            </div>
            
            <div class="formula-box">
                <p>B = <span class="highlight-purple">0.7577</span></p>
            </div>

            <div style="text-align: center; margin: 20px 0; font-size: 1.3em;">
                <p>Threshold: 0.85 - 0.90</p>
                <p style="margin-top: 10px;">0.757 < 0.85</p>
            </div>
        </div>

        <!-- Result -->
        <div class="result-box">
            <h3>🎯 Classification Result</h3>
            <div class="verdict">✅ AI-GENERATED</div>
            <p style="font-size: 1.2em;">The ratio is below the threshold, correctly identifying this as machine-generated text!</p>
        </div>

        <!-- Token Examples -->
        <div class="text-box">
            <h2>🔍 Sample Token Analysis</h2>
            <p style="margin-bottom: 15px;">Here are some key tokens with their actual measured scores:</p>
            
            <table class="comparison-table">
                <thead>
                    <tr>
                        <th>Token</th>
                        <th>PPL Score</th>
                        <th>X-PPL Score</th>
                        <th>Pattern</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><strong>"capybara"</strong></td>
                        <td>6.03</td>
                        <td>5.19</td>
                        <td>Both surprised, but aligned</td>
                    </tr>
                    <tr>
                        <td><strong>"other"</strong></td>
                        <td style="color: #ff0000; font-weight: bold;">11.44</td>
                        <td>4.47</td>
                        <td>Observer very surprised!</td>
                    </tr>
                    <tr>
                        <td><strong>"astrophysics"</strong></td>
                        <td>9.69 + 5.63</td>
                        <td>3.81 + 9.81</td>
                        <td>High scores, models aligned</td>
                    </tr>
                    <tr>
                        <td><strong>"groundbreaking"</strong></td>
                        <td>1.09 + 1.43</td>
                        <td>2.77 + 1.95</td>
                        <td>X-PPL higher overall</td>
                    </tr>
                    <tr>
                        <td><strong>"the" (unusual)</strong></td>
                        <td style="color: #ff0000; font-weight: bold;">9.00</td>
                        <td>4.47</td>
                        <td>Common word, high surprise!</td>
                    </tr>
                    <tr>
                        <td><strong>"whispered"</strong></td>
                        <td>9.13</td>
                        <td>5.25</td>
                        <td>Creative verb choice</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <!-- Theoretical Explanation -->
        <div class="theory-section">
            <h2>🎓 Theoretical Explanation: Why This Difference Occurs</h2>
            
            <div class="theory-box">
                <h3>1. The Prompt Effect (Capybara Problem)</h3>
                <p><strong>The Issue:</strong> The unusual prompt "write about a capybara astrophysicist" forces the AI to use rare word combinations.</p>
                <p style="margin-top: 10px;"><strong>Result:</strong> High perplexity scores (PPL = 302.54) because words like "capybara" and "astrophysicist" together are surprising.</p>
                <p style="margin-top: 10px;"><strong>Without the ratio:</strong> Plain perplexity alone would incorrectly classify this as human-written due to high surprise scores.</p>
                <p style="margin-top: 15px; padding: 10px; background: white; border-radius: 5px;"><em><strong>Source:</strong> Section 3.2, Page 4 - Hans et al. (2024)</em></p>
            </div>

            <div class="highlight-box">
                <h3>2. Why AI Text Has Higher X-PPL</h3>
                <p><strong>For AI-generated text:</strong></p>
                <ul style="margin-left: 20px; margin-top: 10px;">
                    <li>Observer Model: "capybara + astrophysics is surprising!"</li>
                    <li>Performer Model: "I also find capybara + astrophysics surprising in the same way!"</li>
                    <li><strong>Result:</strong> High agreement → X-PPL increases → Ratio < 1</li>
                </ul>
                <p style="margin-top: 15px; padding: 10px; background: white; border-radius: 5px;"><em><strong>Source:</strong> Section 3.3, Pages 4-5 - Hans et al. (2024)</em></p>
            </div>
        </div>

        <!-- Key Insight -->
        <div class="key-insight">
            <h3 style="margin-bottom: 15px; font-size: 1.5em;">💡 The Critical Insight</h3>
            <p><strong>Plain Perplexity Problem:</strong> High PPL (302.54) might suggest human creativity → ❌ WRONG</p>
            <p style="margin-top: 10px;"><strong>Binoculars Solution:</strong> Compare to X-PPL (399.28) to see if models are aligned → ✅ CORRECT</p>
            <p style="margin-top: 15px; font-size: 1.2em; border-top: 2px solid white; padding-top: 15px;">
                The ratio <strong>normalizes for prompt-induced high perplexity</strong> by asking: "Are the models surprised in the same way?" If yes → AI. If no → Human.
            </p>
            <p style="margin-top: 15px; font-size: 0.9em; opacity: 0.9;"><em>Source: Hans et al. (2024), Section 3.3 - Detection Score</em></p>
        </div>

        <!-- Summary -->
        <div class="comparison-section">
            <h2>📋 Summary</h2>
            <div style="font-size: 1.1em; line-height: 2;">
                <p>✅ <strong>Text:</strong> AI-generated capybara story (135 tokens)</p>
                <p>✅ <strong>PPL:</strong> 302.54 (moderately high - unusual topic)</p>
                <p>✅ <strong>X-PPL:</strong> 399.28 (even higher - models aligned)</p>
                <p>✅ <strong>Ratio:</strong> 0.757 < 0.85 threshold</p>
                <p>✅ <strong>Result:</strong> Correctly classified as AI-generated</p>
                <p style="margin-top: 20px; color: #00BEBA; font-size: 1.2em;">✨ <strong>The ratio captures what perplexity alone cannot!</strong></p>
                <p style="margin-top: 20px; font-size: 0.9em; opacity: 0.8;"><em>Measurements from: Miczek (2024) implementation using Falcon-7B models</em></p>
            </div>
        </div>

    </div>
</body>
</html>