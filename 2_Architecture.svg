<svg viewBox="0 0 1400 1000" xmlns="http://www.w3.org/2000/svg">
  <!-- Background -->
  <rect width="1400" height="1000" fill="#f5f5f5"/>
  
  <!-- Title -->
  <text x="700" y="40" font-family="Arial, sans-serif" font-size="28" font-weight="bold" text-anchor="middle" fill="#1a1a1a">
    NVIDIA NeMo Guardrails Architecture
  </text>
  <text x="700" y="65" font-family="Arial, sans-serif" font-size="16" text-anchor="middle" fill="#666666">
    Comprehensive Safety Framework for LLM Applications
  </text>
  
  <!-- User Input -->
  <g id="user-input">
    <rect x="50" y="120" width="200" height="80" rx="10" fill="#e3f2fd" stroke="#1976d2" stroke-width="2"/>
    <text x="150" y="150" font-family="Arial, sans-serif" font-size="16" font-weight="bold" text-anchor="middle" fill="#1976d2">User Input</text>
    <text x="150" y="175" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#424242">Prompt/Query</text>
  </g>
  
  <!-- Input Rails Layer -->
  <g id="input-rails">
    <rect x="330" y="100" width="740" height="120" rx="10" fill="#fff3e0" stroke="#f57c00" stroke-width="3"/>
    <text x="700" y="130" font-family="Arial, sans-serif" font-size="18" font-weight="bold" text-anchor="middle" fill="#f57c00">Input Rails</text>
    
    <!-- Input Rail Components -->
    <rect x="350" y="150" width="160" height="50" rx="5" fill="#ffffff" stroke="#f57c00" stroke-width="1"/>
    <text x="430" y="170" font-family="Arial, sans-serif" font-size="12" font-weight="bold" text-anchor="middle" fill="#424242">Jailbreak Detection</text>
    <text x="430" y="185" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#666666">Prompt Injection</text>
    
    <rect x="530" y="150" width="160" height="50" rx="5" fill="#ffffff" stroke="#f57c00" stroke-width="1"/>
    <text x="610" y="170" font-family="Arial, sans-serif" font-size="12" font-weight="bold" text-anchor="middle" fill="#424242">Topic Detection</text>
    <text x="610" y="185" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#666666">Allowed Topics</text>
    
    <rect x="710" y="150" width="160" height="50" rx="5" fill="#ffffff" stroke="#f57c00" stroke-width="1"/>
    <text x="790" y="170" font-family="Arial, sans-serif" font-size="12" font-weight="bold" text-anchor="middle" fill="#424242">Moderation</text>
    <text x="790" y="185" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#666666">Toxicity Check</text>
    
    <rect x="890" y="150" width="160" height="50" rx="5" fill="#ffffff" stroke="#f57c00" stroke-width="1"/>
    <text x="970" y="170" font-family="Arial, sans-serif" font-size="12" font-weight="bold" text-anchor="middle" fill="#424242">User Verification</text>
    <text x="970" y="185" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#666666">Authorization</text>
  </g>
  
  <!-- Dialog Rails -->
  <g id="dialog-rails">
    <rect x="330" y="250" width="740" height="200" rx="10" fill="#e8f5e9" stroke="#388e3c" stroke-width="3"/>
    <text x="700" y="280" font-family="Arial, sans-serif" font-size="18" font-weight="bold" text-anchor="middle" fill="#388e3c">Dialog Rails</text>
    
    <!-- Colang Section -->
    <rect x="350" y="300" width="340" height="130" rx="5" fill="#ffffff" stroke="#388e3c" stroke-width="1"/>
    <text x="520" y="320" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="#424242">Colang Scripts</text>
    <text x="520" y="340" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="#666666">define user intent</text>
    <text x="520" y="355" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="#666666">define bot response</text>
    <text x="520" y="370" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="#666666">define flow</text>
    <text x="520" y="385" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="#666666">define guards</text>
    <text x="520" y="410" font-family="Arial, sans-serif" font-size="10" font-style="italic" text-anchor="middle" fill="#888888">Natural language programming</text>
    
    <!-- Flow Management -->
    <rect x="710" y="300" width="340" height="130" rx="5" fill="#ffffff" stroke="#388e3c" stroke-width="1"/>
    <text x="880" y="320" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="#424242">Flow Management</text>
    <text x="880" y="340" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="#666666">• Conversation State Tracking</text>
    <text x="880" y="355" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="#666666">• Context Management</text>
    <text x="880" y="370" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="#666666">• Intent Recognition</text>
    <text x="880" y="385" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="#666666">• Action Execution</text>
    <text x="880" y="410" font-family="Arial, sans-serif" font-size="10" font-style="italic" text-anchor="middle" fill="#888888">Controls conversation flow</text>
  </g>
  
  <!-- LLM Layer -->
  <g id="llm-layer">
    <rect x="330" y="480" width="740" height="120" rx="10" fill="#f3e5f5" stroke="#7b1fa2" stroke-width="3"/>
    <text x="700" y="510" font-family="Arial, sans-serif" font-size="18" font-weight="bold" text-anchor="middle" fill="#7b1fa2">LLM Layer</text>
    
    <!-- Main LLM -->
    <rect x="350" y="530" width="220" height="50" rx="5" fill="#ffffff" stroke="#7b1fa2" stroke-width="1"/>
    <text x="460" y="550" font-family="Arial, sans-serif" font-size="12" font-weight="bold" text-anchor="middle" fill="#424242">Main LLM</text>
    <text x="460" y="565" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#666666">GPT-4, Claude, Llama, etc.</text>
    
    <!-- Guardrail LLM -->
    <rect x="590" y="530" width="220" height="50" rx="5" fill="#ffffff" stroke="#7b1fa2" stroke-width="1"/>
    <text x="700" y="550" font-family="Arial, sans-serif" font-size="12" font-weight="bold" text-anchor="middle" fill="#424242">Guardrail LLM</text>
    <text x="700" y="565" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#666666">Self-check Model</text>
    
    <!-- Knowledge Base -->
    <rect x="830" y="530" width="220" height="50" rx="5" fill="#ffffff" stroke="#7b1fa2" stroke-width="1"/>
    <text x="940" y="550" font-family="Arial, sans-serif" font-size="12" font-weight="bold" text-anchor="middle" fill="#424242">Knowledge Base</text>
    <text x="940" y="565" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#666666">RAG Integration</text>
  </g>
  
  <!-- Output Rails -->
  <g id="output-rails">
    <rect x="330" y="630" width="740" height="120" rx="10" fill="#fce4ec" stroke="#c2185b" stroke-width="3"/>
    <text x="700" y="660" font-family="Arial, sans-serif" font-size="18" font-weight="bold" text-anchor="middle" fill="#c2185b">Output Rails</text>
    
    <!-- Output Rail Components -->
    <rect x="350" y="680" width="160" height="50" rx="5" fill="#ffffff" stroke="#c2185b" stroke-width="1"/>
    <text x="430" y="700" font-family="Arial, sans-serif" font-size="12" font-weight="bold" text-anchor="middle" fill="#424242">Fact Checking</text>
    <text x="430" y="715" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#666666">Hallucination Detection</text>
    
    <rect x="530" y="680" width="160" height="50" rx="5" fill="#ffffff" stroke="#c2185b" stroke-width="1"/>
    <text x="610" y="700" font-family="Arial, sans-serif" font-size="12" font-weight="bold" text-anchor="middle" fill="#424242">Content Filter</text>
    <text x="610" y="715" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#666666">Safety Check</text>
    
    <rect x="710" y="680" width="160" height="50" rx="5" fill="#ffffff" stroke="#c2185b" stroke-width="1"/>
    <text x="790" y="700" font-family="Arial, sans-serif" font-size="12" font-weight="bold" text-anchor="middle" fill="#424242">PII Detection</text>
    <text x="790" y="715" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#666666">Data Privacy</text>
    
    <rect x="890" y="680" width="160" height="50" rx="5" fill="#ffffff" stroke="#c2185b" stroke-width="1"/>
    <text x="970" y="700" font-family="Arial, sans-serif" font-size="12" font-weight="bold" text-anchor="middle" fill="#424242">Format Validation</text>
    <text x="970" y="715" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#666666">Response Structure</text>
  </g>
  
  <!-- Final Output -->
  <g id="final-output">
    <rect x="1150" y="630" width="200" height="120" rx="10" fill="#e1f5fe" stroke="#0277bd" stroke-width="2"/>
    <text x="1250" y="665" font-family="Arial, sans-serif" font-size="16" font-weight="bold" text-anchor="middle" fill="#0277bd">Final Output</text>
    <text x="1250" y="690" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#424242">Validated Response</text>
    <text x="1250" y="710" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#666666">Safe &amp; Compliant</text>
  </g>
  
  <!-- Configuration & Policies -->
  <g id="config">
    <rect x="50" y="300" width="230" height="400" rx="10" fill="#e8eaf6" stroke="#3f51b5" stroke-width="2"/>
    <text x="165" y="330" font-family="Arial, sans-serif" font-size="16" font-weight="bold" text-anchor="middle" fill="#3f51b5">Configuration</text>
    
    <!-- YAML Config -->
    <rect x="70" y="350" width="190" height="80" rx="5" fill="#ffffff" stroke="#3f51b5" stroke-width="1"/>
    <text x="165" y="370" font-family="Arial, sans-serif" font-size="12" font-weight="bold" text-anchor="middle" fill="#424242">config.yml</text>
    <text x="165" y="385" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#666666">• Models</text>
    <text x="165" y="398" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#666666">• Rails</text>
    <text x="165" y="411" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#666666">• Prompts</text>
    
    <!-- Colang Scripts -->
    <rect x="70" y="440" width="190" height="80" rx="5" fill="#ffffff" stroke="#3f51b5" stroke-width="1"/>
    <text x="165" y="460" font-family="Arial, sans-serif" font-size="12" font-weight="bold" text-anchor="middle" fill="#424242">Colang Scripts</text>
    <text x="165" y="475" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#666666">• Flows</text>
    <text x="165" y="488" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#666666">• Guards</text>
    <text x="165" y="501" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#666666">• Actions</text>
    
    <!-- Policies -->
    <rect x="70" y="530" width="190" height="80" rx="5" fill="#ffffff" stroke="#3f51b5" stroke-width="1"/>
    <text x="165" y="550" font-family="Arial, sans-serif" font-size="12" font-weight="bold" text-anchor="middle" fill="#424242">Safety Policies</text>
    <text x="165" y="565" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#666666">• Content Rules</text>
    <text x="165" y="578" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#666666">• Topic Restrictions</text>
    <text x="165" y="591" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#666666">• User Permissions</text>
    
    <!-- Actions -->
    <rect x="70" y="620" width="190" height="60" rx="5" fill="#ffffff" stroke="#3f51b5" stroke-width="1"/>
    <text x="165" y="640" font-family="Arial, sans-serif" font-size="12" font-weight="bold" text-anchor="middle" fill="#424242">Custom Actions</text>
    <text x="165" y="660" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#666666">API Integrations</text>
  </g>
  
  <!-- Flow Arrows -->
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#666666"/>
    </marker>
    <marker id="blockarrow" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#d32f2f"/>
    </marker>
  </defs>
  
  <!-- Main flow -->
  <path d="M 250 160 L 330 160" stroke="#666666" stroke-width="3" fill="none" marker-end="url(#arrowhead)"/>
  <path d="M 700 220 L 700 250" stroke="#666666" stroke-width="3" fill="none" marker-end="url(#arrowhead)"/>
  <path d="M 700 450 L 700 480" stroke="#666666" stroke-width="3" fill="none" marker-end="url(#arrowhead)"/>
  <path d="M 700 600 L 700 630" stroke="#666666" stroke-width="3" fill="none" marker-end="url(#arrowhead)"/>
  <path d="M 1070 690 L 1150 690" stroke="#666666" stroke-width="3" fill="none" marker-end="url(#arrowhead)"/>
  
  <!-- Config connections -->
  <path d="M 280 350 L 350 175" stroke="#3f51b5" stroke-width="2" stroke-dasharray="5,5" fill="none"/>
  <path d="M 280 450 L 350 350" stroke="#3f51b5" stroke-width="2" stroke-dasharray="5,5" fill="none"/>
  <path d="M 280 550 L 350 705" stroke="#3f51b5" stroke-width="2" stroke-dasharray="5,5" fill="none"/>
  
  <!-- Block indicators -->
  <g id="block-indicators">
    <!-- Input block -->
    <rect x="1100" y="140" width="80" height="40" rx="20" fill="#ffebee" stroke="#d32f2f" stroke-width="2"/>
    <text x="1140" y="165" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="#d32f2f">BLOCK</text>
    <path d="M 1070 160 L 1100 160" stroke="#d32f2f" stroke-width="2" fill="none" marker-end="url(#blockarrow)"/>
    
    <!-- Output block -->
    <rect x="1100" y="560" width="80" height="40" rx="20" fill="#ffebee" stroke="#d32f2f" stroke-width="2"/>
    <text x="1140" y="585" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="#d32f2f">BLOCK</text>
    <path d="M 970 600 L 1140 560" stroke="#d32f2f" stroke-width="2" fill="none" marker-end="url(#blockarrow)"/>
  </g>
  
  <!-- Key Features -->
  <g id="features">
    <rect x="50" y="780" width="1300" height="180" rx="10" fill="#ffffff" stroke="#cccccc" stroke-width="1"/>
    <text x="700" y="810" font-family="Arial, sans-serif" font-size="16" font-weight="bold" text-anchor="middle" fill="#424242">Key Features of NeMo Guardrails</text>
    
    <text x="100" y="840" font-family="Arial, sans-serif" font-size="12" fill="#424242">1. <tspan font-weight="bold">Programmable Safety</tspan>: Define safety rules using natural language (Colang)</text>
    <text x="100" y="860" font-family="Arial, sans-serif" font-size="12" fill="#424242">2. <tspan font-weight="bold">Multi-layer Protection</tspan>: Input, dialog, and output rails work together</text>
    <text x="100" y="880" font-family="Arial, sans-serif" font-size="12" fill="#424242">3. <tspan font-weight="bold">LLM Agnostic</tspan>: Works with any LLM (OpenAI, Anthropic, Meta, etc.)</text>
    <text x="100" y="900" font-family="Arial, sans-serif" font-size="12" fill="#424242">4. <tspan font-weight="bold">Self-check Capability</tspan>: Uses separate LLMs to validate inputs/outputs</text>
    
    <text x="700" y="840" font-family="Arial, sans-serif" font-size="12" fill="#424242">5. <tspan font-weight="bold">Conversation Management</tspan>: Tracks state and context</text>
    <text x="700" y="860" font-family="Arial, sans-serif" font-size="12" fill="#424242">6. <tspan font-weight="bold">Extensible Actions</tspan>: Custom integrations and API calls</text>
    <text x="700" y="880" font-family="Arial, sans-serif" font-size="12" fill="#424242">7. <tspan font-weight="bold">Hallucination Prevention</tspan>: Fact-checking and knowledge grounding</text>
    <text x="700" y="900" font-family="Arial, sans-serif" font-size="12" fill="#424242">8. <tspan font-weight="bold">Enterprise Ready</tspan>: PII protection, compliance, audit trails</text>
    
    <text x="100" y="935" font-family="Arial, sans-serif" font-size="11" font-style="italic" fill="#666666">NeMo Guardrails provides a comprehensive framework for building safe, reliable, and controllable LLM applications</text>
  </g>
</svg>